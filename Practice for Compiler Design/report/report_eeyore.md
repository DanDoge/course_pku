### EEyore2Tigger

这一部分的报告包括Eeyore到Tigger的程序的功能，拓展。

这一部分的代码能够将单个符合Eeyore的BNF文法的程序转换成符合Tigger文法的程序。除了下面列出来的功能，其他的数据结构和实现方法和翻译Minic类似。

在课程要求之外，我实现了以下的功能
- 简单优化：常量表达式消除
- 线性扫描寄存器分配算法

#### 常量表达式消除

在翻译双目运算符时，如果每一个运算数都是数字，可以翻译过程中直接计算出来，具体实现参考下面的例子

```c++
int get_result(int a, int b, Op_Type op){
    int res = 0;
    switch(op){
        case OP_EQ:{
            res = a == b;
            break;
        }
        // more cases
    }
    return res;
}
```

#### 线性寄存器分配

我将每一个语句看作一个基本块，记录每一条语句上活跃的变量
- 预处理
    - 构建数据流：主要是扫描if和goto语句，找到对应的下一/二条语句；其他语句的下一条语句默认是下一行语句
    - 活性分析：记录每一条语句的use和define
        - 对数组的每一次访问都看作使用整个数组
        - 按照之前构造的数据流倒序分析活性，对每一个函数的语句迭代直到收敛
- 分配寄存器：每一个变量对应一个寄存器
    - 从前向后扫描每一条语句，如果有变量没有分配寄存器，分配一个空缺的寄存器，没有空缺的，踢掉最后活跃时间最晚的一个变量
    - 变量使用 *不* 按照RISC规范，所有寄存器都看作caller saved，调用函数时保存活跃的变量，返回后写回寄存器
