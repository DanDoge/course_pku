### QoS概述

业务有和业务对应的性能等级
- GBR：保证比特流
- 优先级1-9
- 等间隔数据 --网络--> 不等间隔数据
    - 缓存减少时延抖动

QoS
- 资源预留 / 呼叫建立
    - 路由器预留带宽和缓存空间
    - 类似电话交互的电话网
- RSVP
    - 发收端进入一个多播组
    - PATH报文说明路径，主机回复自己需要的带宽，路由器预留带宽
        - 没有带宽就拒绝流
    - intserv按每一个流分配带宽 -> 开销大！
- diffser
    - 按等级区分服务：聚合流
    - 如何区分？分组标记 / 流之间保护隔离 / 实现在边界路由器就好
    - IP首部tos字段
    - 内部路由器只看ds值就好了
    - 两种行为：迅速转发(查表就好，呼叫时建立表项) / 确保转发(先丢优先级低的)
- 调度
    - FIFO：不区分分组，不公平
    - 优先级调度：有高优先级的就不发低优先级的
    - 循环调度：循环扫描各个队列
    - 加权公平调度
        - 假设有多个虚拟链路，看哪一个先发完，就发哪一个
- 流量整形
    - 调度之后流量间隔不等，出DS域的时候要调回去，令牌桶
- MPLS
    - 提供面向连接的服务
    - 每一个分组携带一个标记，类似虚电路，硬件转发

- RSVP，MPLS都是网络层提供的面向连接的服务
