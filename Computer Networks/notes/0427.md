### 传输层

传输层功能

- 为应用层提供连接/无连接的服务，差错和流量控制

- 点到点的差错流量控制，和链路层不同
- 寻址：服务访问点SAP

- 复用
    - 多个应用使用一个地址
    - 守护进程监听多个端口：有要求才启动进程

- 流量控制
- 端口
    - 0-1023熟知端口，预留一些
    - 套接字：进程通过套接字接入网络



UDP

- 8字节首部，不降低发送速率
    - 源/目的端口，长度（报文的长度），检验和（首部的校验和）
    - 检验和：将UDP和伪首部计算校验和，伪首部和8字节的校验和
- 只增加端口和差错检测
- TFTP：简单的文件传输协议
    - FTP过于复杂
- DNS
    - 域名系统：三级-二级-顶级域名
    - 域名 -> ip地址
    - 分布式结构，单点失效问题，可扩展性，层状结构（根服务器 - 顶级域名服务器 - 权限服务器）
    - 本机发给本地DNS，代理用户查询
    - 可靠性：主DNS和辅助DNS，主定期复制到辅助里面
    - 递归查询：DNS代替主机解析域名，直到返回完整的答案
    - 迭代查询：返回部分查询结果
    - DNS缓存：维护记录和计时器
    - 内容分发：前端平衡负载，探测TCP，HTTP信息利用DNS重定向
        - CDN：分发到不同服务器上，DNS重定向到对应的服务器上（离用户更近的主机）
    - 查询/响应，数据包内容