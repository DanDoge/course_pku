### MAC

802.11\*

- 编码方式不一样，e.g. 802.11b/a/g/n

- ad-hoc
    - 网络层解决多跳的问题，链路层只管相邻节点
- 802.11wlan
    - 基站：AP（数据都先发给AP，AP再转发）；基本业务集
    - 无线链路：信号强度衰减严重，SNR/BER折中
        - 距离增加，SNR降低，BER增大
        - 802.11帧：同步头128bit，调制方式是1mbps的差分bpsk；后面头调制用2mbps差分qpsk；在后面的东西可以用1m/2m/5.5-11m速率；帧头传输时间总相同，传长帧效率更高，可以到2k+字节
            - 四个mac地址（目的地址（AP），源地址，路由器地址；AP地址接入的时候得到，路由器mac是ARP得到），帧序号，持续时间
            - 帧类型：management（和AP关联，定时同步，认证），control（竞争阶段握手，确认，结束CFP；802.11提供有连接的服务），data frames
            - AP进行地址转换：802.11转换成802.3帧
        - AP（空闲的话）周期性发送信标广播帧，包含BSS-ID
        - 802.11b 信道：11个信道，每一个信道22m，间隔5m，1、6、11互相正交
            - 两个AP互相干扰会降低效率：需要载波侦听
        - 主动/被动扫描
    - 隐蔽节点问题：互相不能侦听的结点可能互相干扰
        - 不需要碰撞检测：因为检测不到
        - CSMA/CA：空闲了DIFS就发帧，占用了启动随机退避定时器（空闲了DIFS之后才计时），收不到ACK增加退避时间；收端收到帧SIFS之后响应ACK
        - MACA：发送端先发短的RTS，收端收到了广播CTS，收到不是自己的CTS，没有信号也要主动退避
            - 虚拟的载波侦听，CTS提取网络分配矢量
            - 没东西发也没东西收就睡眠好了，节能
        - IFS？确认帧等待时间更少，数据帧等待时间更长
    - PCF：AP轮询设备
    - 暴露结点：对收端没有影响的结点可能影响了发端