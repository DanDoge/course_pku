### 网络互连

滑动窗口充要条件？

- 必要条件：w_s <= 2^n - 1w_r <= 2^{n - 1}, w_s >= w_r(惯例)
- 充要条件：w_s + w_r <= 2{n}

互联网：网络互联起来，通过路由器

- 互联设备：转发器/网桥/路由器
- 网络层协议：TCP/IP
    - IP/ARP/ICMP
- 需要解决的问题：地址分配/分组发送/路由转发/网路控制（超时/差错/拥塞）
    - 路由器有自己的拥塞控制的算法，TCP的拥塞控制作为辅助
- IP分组格式
    - 首部单独计算一个校验和：两个字节作为一个字做反码算术运算，溢出了在最低位+1
    - IP地址分类
        - 分类：分成ABCDE五类，常用ABC，网络号+主机号
        - A类：0xxx，8+24，B类：10xxx 16+16，C类：110xxx，24+8
        - 只分配网络号，主机号网络用户分配
        - 多个接口就有多个ip
        - 不使用的ip：全0表示自己，主机地址全1表示全体
        - 同一个网络：网络号相同
    - 分组传送：如果和接受主机在同一网络：直接交付，否则间接交付（交给路由器）
        - 发送主机检查网络地址是否相同
        - 怎么得到目的设备的mac地址：ARP协议，建立ip到mac的映射，发送广播帧/ARP请求，请求帧的目的地址式广播地址，ARP高速缓存
    - 路由转发
        - 路由表：目的地址，接口 -> 表很大
        - 小表：只存前缀，选择更长的前缀项
        - 路由协议/算法建立路由表：距离矢量算法/链路状态算法
        - RIP：分布式协议，每一个路由器维护一个“目的网络 跳数（直连的条数为1） 下一条”的表，和相邻的路由器交换表，选择跳数最少的路由，16跳表示不可达
            - RIP进程 定期发送报文，UDP520端口通信，广播/组播发送
        - 转发算法：先查特定路由，再看路由表，最后发给默认路由，都没有ICMP报错
    - 子网划分：网络号，子网号，主机号；子网掩码：1是子网地址
        - 避免arp风暴
        - 子网的转发算法：用子网地址查表
    - 无分类地址：网络前缀，主机号；斜线表示前缀位数
        - 路由聚合，减少表项数