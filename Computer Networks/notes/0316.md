### MAC

习题：捎带确认

- 区分一下半双工和全双工



MAC

- 两类链路：点到点 / 共享传输介质
- PPP HDLC不支持MAC
- MAC解决 结点如何共享信道，确定下一个使用信道的节点
- 理想的MAC：一个节点发送可以全速 / M个节点平分速率 / 全分布式（没有特殊节点/没有同步时钟）/ 简单
- 划分信道
    - TDMA：每一个帧分成很多时隙，每一个用户一个 -> 需要时隙同步，浪费资源，阻塞问题
        - e.g. 2G手机
    - FDMA：频域上分信道
    - 上述静态分配的问题：平均延迟增大N倍
        - 排队论：用户数据量突发的时候会阻塞，平均延迟时间 1 / ($\lambda - \mu C$)
        - 适合于用户数据率恒定，数据量有上限，e.g. 打电话
- 随机访问控制
    - 能发就发，碰撞了恢复
    - ALOHA：假设帧长度相同，发送时间为1，不需要同步，帧到了就发
        - 成功传输概率 Np (1 - p)^{2(N - 1)}
        - 最大利用率18%
    - 时隙ALOHA：分时隙，时隙头才能发
        - 要求所有节点时钟同步，e.g. AP
        - 成功概率 Np (1 - p)^{N - 1}
        - 最大利用率37%
    - 另一种推导：利用率Ge^{-G}，和负载G有关
- CSMA：载波侦听多址访问
    - 结点发信号前测试信道，空闲的话就：1坚持 -> 发 非坚持 -> 忙了就等一会再发 p-坚持 -> p概率发
    - 载波侦听了仍然可能碰撞：信号传输需要时间
- CSMA/CD
    - 传播延时$\tau$远小于发送时间$T_{p}$ 
    - 碰撞了就退避
- 无冲突协议：预约协议
    - 位图协议：用户在竞争时隙中将对应位置1
        - 信道利用率：低负载时要等N个时隙，高负载等待时间可以忽略
    - 轮询：主节点邀请从结点发送
        - 令牌环：控制令牌经过各个节点
    - 有限竞争协议
        - ALOHA低负载很好，无冲突预约高负载很好，结合？
        - 结点划分成组，每一个组内的各站竞争每一个组对应的一个时隙，组内站数小点



以太网

- 帧格式：同步头，tgt，src，type，data，FCS
- 只接受发到自己的数据
- 检测到碰撞的时间：最长2tau
- 二进制指数退避：2tau争用期，信号叠加的话会打乱曼切斯特编码的平均性，能量不再一定
    - 重传次数k，推迟 [0, 2^k - 1] times 2tau 再发送，10次还不成功，丢弃帧，通知上层
    - 以太网争用期51.2mus，最小帧64Byte，小于这个大小的都是无效帧
    - 信道利用率：1 / （1 + 4.44$\alpha$）