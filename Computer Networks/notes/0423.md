### 移动主机路由，组播，自组织网络

组播

- 减少带宽消耗
- 使用组播地址: D类地址（不能做源地址）
- 成员动态，使用以太网硬件组播
    - MAC地址0x01开头的是组播，和ip组播业务有关的：0x01005E + 0b + ip低23位
    - 生成树消除环路
    - OSPF,RIP都用ip组播传播路由信息
- 组播路由
    - 每一个路由器为每一个组播业务维护一个树
    - IGMP：路由器获得组播组成员的信息
        - 加入组播组，发送成员报告报文，路由器转发给其他路由器，离开了发离开报文，路由器周期性询问维护成员信息，主机看到有别人回复自己就不回了
        - 主机访问web页面得到组播组的地址
    - 路由选择
        - 找到源主机为根的转发树
        - 基于生成树：泛洪+剪枝
            - 反向RPF：只转发从最短路径来的（看TTL，路径长度相同，选ip地址最小的），没有组成员的会被剪枝
        - 基于核心树：核心固定
            - 先转发给核心，再核心发送给不同的成员
    - 一些协议：DVMRP，MOSPF，PIM
    - 组播密度大：基于生成树更好，反之核心树更好



移动主机路由

- 增加归属代理，外部代理，关联地址
- MN向HA注册，建立coa，mnip的绑定关系，建立隧道
    - 跑到别的FA里面之后让HA知道自己在哪里，就能路由过去了
    - 或者HA通知通信对端，直接路由过去，解决了三角路由问题
    - HA可以是普通主机，类似ARP



自组织网络路由

- AODV：面向连接的路由
    - 源节点泛洪，建立到源节点的反向路径，不处理受过的包，目的节点回应，就建立了路由
    - 发送的消息只携带目的地址
    - 目的序号：大的就是新的
    - 没有确认信息就删除路径
    - 链路失效报告